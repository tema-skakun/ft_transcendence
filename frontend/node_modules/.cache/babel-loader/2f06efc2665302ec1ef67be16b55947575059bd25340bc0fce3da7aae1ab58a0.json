{"ast":null,"code":"var _jsxFileName = \"/Users/linu/Projects/BORIS/frontend/src/components/Content/Game/components/Canvas.tsx\",\n  _s = $RefreshSig$();\nimport { useRef, useState, useEffect } from \"react\";\nimport { winningStates } from \"../Game\";\nimport { useCanvas } from \"../hooks/useCanvas\";\nimport { useAnimation } from \"../hooks/useAnimation\";\nimport { useCallback } from \"react\";\nimport { Numbers } from \"../utility/number\";\nimport { dot } from \"../utility/dot\";\nimport { paddle } from \"../utility/paddle\";\nimport { clear } from \"../utility/initalize\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Canvas = _ref => {\n  _s();\n  let {\n    gameStateRef,\n    CONFIG,\n    goalsPlayerOne,\n    goalsPlayerTwo,\n    winningRef,\n    backgroundImg\n  } = _ref;\n  const CanvasRef = useRef(null);\n  const [drawingContext, setDrawingContext] = useState(null);\n  const [SCALAR, setSCALAR] = useState(1); // For scaleing... responsive web design\n\n  useCanvas(SCALAR, CanvasRef, CONFIG, setDrawingContext);\n  const handleResize = useCallback(() => {\n    if (!CONFIG) return;\n    if (window.innerHeight / window.innerWidth < 2 / 3) {\n      setSCALAR(CONFIG.HEIGHT / window.innerHeight);\n    } else {\n      setSCALAR(CONFIG.WIDTH / window.innerWidth);\n    }\n    // setSCALAR(1); // Took out scaleing for css.\n  }, [CONFIG]);\n  useEffect(() => {\n    // As soon as we get the config we calculate the scalar.\n    if (!CONFIG) return;\n    handleResize(); // call once even without resize.\n\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [CONFIG, handleResize]); // Yields the SCALAR for further displays.\n\n  const draw = useCallback(() => {\n    if (!drawingContext || !CONFIG) return;\n\n    // clear(SCALAR, CONFIG, drawingContext);\n    drawingContext.drawImage(backgroundImg.current, 0, 0, CONFIG.WIDTH / SCALAR, CONFIG.HEIGHT / SCALAR);\n    if (gameStateRef.current) {\n      dot(SCALAR, CONFIG, drawingContext, gameStateRef.current);\n      paddle(SCALAR, CONFIG, drawingContext, gameStateRef.current, 1);\n      paddle(SCALAR, CONFIG, drawingContext, gameStateRef.current, 2);\n      Numbers({\n        drawingContext: drawingContext,\n        num: goalsPlayerOne.current.toString(),\n        x: CONFIG.WIDTH / 4 / SCALAR,\n        y: (CONFIG.PADDING + 20) / SCALAR,\n        font: `${40 / SCALAR}px Arial`\n      });\n      Numbers({\n        drawingContext: drawingContext,\n        num: goalsPlayerTwo.current.toString(),\n        x: CONFIG.WIDTH / 4 * 3 / SCALAR,\n        y: (CONFIG.PADDING + 20) / SCALAR,\n        font: `${40 / SCALAR}px Arial`\n      });\n      if (winningRef.current === winningStates.lost) {\n        Numbers({\n          drawingContext: drawingContext,\n          num: 'YOU LOST',\n          x: CONFIG.WIDTH / 2 / SCALAR,\n          y: CONFIG.HEIGHT / 2 / SCALAR,\n          font: `${80 / SCALAR} 'Press Start 2P', cursive`\n        });\n        setTimeout(() => clear(SCALAR, CONFIG, drawingContext), 4000);\n      } else if (winningRef.current === winningStates.won) {\n        Numbers({\n          drawingContext: drawingContext,\n          num: 'YOU WON',\n          x: CONFIG.WIDTH / 2 / SCALAR,\n          y: CONFIG.HEIGHT / 2 / SCALAR,\n          font: `${80 / SCALAR} 'Press Start 2P', cursive`\n        });\n        setTimeout(() => clear(SCALAR, CONFIG, drawingContext), 4000);\n      }\n    }\n  }, [drawingContext, CONFIG, SCALAR, backgroundImg, gameStateRef, goalsPlayerTwo, goalsPlayerOne, winningRef]);\n\n  // <Means for animation>\n  const LoopCallback = useCallback(() => {\n    draw();\n    requestAnimationFrame(LoopCallback);\n  }, [draw]);\n  useAnimation(LoopCallback, drawingContext, CONFIG);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: CanvasRef,\n    id: \"gameScreen\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 9\n  }, this);\n};\n_s(Canvas, \"4ld4nsyahqAwfjHFHKxOv5cf6J0=\", false, function () {\n  return [useCanvas, useAnimation];\n});\n_c = Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["useRef","useState","useEffect","winningStates","useCanvas","useAnimation","useCallback","Numbers","dot","paddle","clear","jsxDEV","_jsxDEV","Canvas","_ref","_s","gameStateRef","CONFIG","goalsPlayerOne","goalsPlayerTwo","winningRef","backgroundImg","CanvasRef","drawingContext","setDrawingContext","SCALAR","setSCALAR","handleResize","window","innerHeight","innerWidth","HEIGHT","WIDTH","addEventListener","removeEventListener","draw","drawImage","current","num","toString","x","y","PADDING","font","lost","setTimeout","won","LoopCallback","requestAnimationFrame","ref","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/linu/Projects/BORIS/frontend/src/components/Content/Game/components/Canvas.tsx"],"sourcesContent":["import { useRef, useState, useEffect } from \"react\";\nimport { winningStates } from \"../Game\";\nimport { Config } from \"../interfaces/config\";\nimport { GameState } from \"../interfaces/gameState\";\nimport { useCanvas } from \"../hooks/useCanvas\";\nimport { useAnimation } from \"../hooks/useAnimation\";\nimport { useCallback } from \"react\";\nimport { Numbers } from \"../utility/number\";\nimport { dot } from \"../utility/dot\";\nimport { paddle } from \"../utility/paddle\";\nimport { clear } from \"../utility/initalize\";\n\nexport type CanvasProps = {\n\tgameStateRef: React.MutableRefObject<GameState | null>;\n\tCONFIG: Config | null;\n\tgoalsPlayerOne: React.MutableRefObject<number>;\n\tgoalsPlayerTwo: React.MutableRefObject<number>;\n\twinningRef: React.MutableRefObject<winningStates>;\n\tbackgroundImg: React.MutableRefObject<HTMLImageElement>;\n}\n\nexport const Canvas: React.FC<CanvasProps> = ({gameStateRef, CONFIG, goalsPlayerOne, goalsPlayerTwo, winningRef, backgroundImg}: CanvasProps) => {\n\n\tconst CanvasRef: React.RefObject<HTMLCanvasElement> = useRef<HTMLCanvasElement>(null);\n\tconst [drawingContext, setDrawingContext] = useState<CanvasRenderingContext2D | null>(null)\n\tconst [SCALAR, setSCALAR] = useState<number>(1); // For scaleing... responsive web design\n\n\tuseCanvas(SCALAR, CanvasRef, CONFIG, setDrawingContext);\n\n\tconst handleResize = useCallback(() => {\n\t\tif (!CONFIG)\n\t\t\treturn ;\n\n\t\tif ((window.innerHeight / window.innerWidth) < (2/3))\n\t\t{\n\t\t\tsetSCALAR(CONFIG.HEIGHT / window.innerHeight);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetSCALAR(CONFIG.WIDTH / window.innerWidth);\n\t\t}\n\t\t// setSCALAR(1); // Took out scaleing for css.\n\t}, [CONFIG])\n\n\tuseEffect(() => { // As soon as we get the config we calculate the scalar.\n\t\tif (!CONFIG)\n\t\t\treturn ;\n\n\t\thandleResize(); // call once even without resize.\n\n\t\twindow.addEventListener('resize', handleResize)\n\t\treturn (() => {\n\t\t\twindow.removeEventListener('resize', handleResize);\n\t\t})\n\t}, [CONFIG, handleResize]) // Yields the SCALAR for further displays.\n\n\tconst draw = useCallback(() => {\n\t\tif (!drawingContext || !CONFIG)\n\t\t\treturn ;\n\t\t\n\t\t// clear(SCALAR, CONFIG, drawingContext);\n\t\tdrawingContext.drawImage(backgroundImg.current, 0, 0, CONFIG.WIDTH / SCALAR, CONFIG.HEIGHT / SCALAR)\n\t\tif (gameStateRef.current)\n\t\t{\n\t\t\tdot(SCALAR, CONFIG, drawingContext, gameStateRef.current);\n\t\t\tpaddle(SCALAR, CONFIG, drawingContext, gameStateRef.current, 1);\n\t\t\tpaddle(SCALAR, CONFIG, drawingContext, gameStateRef.current, 2);\n\t\t\tNumbers({\n\t\t\t\tdrawingContext: drawingContext,\n\t\t\t\tnum: goalsPlayerOne.current.toString(),\n\t\t\t\tx: (CONFIG.WIDTH / 4) / SCALAR,\n\t\t\t\ty: (CONFIG.PADDING + 20) / SCALAR,\n\t\t\t\tfont: `${40 / SCALAR}px Arial`\n\t\t\t})\n\t\t\tNumbers({\n\t\t\t\tdrawingContext: drawingContext,\n\t\t\t\tnum: goalsPlayerTwo.current.toString(),\n\t\t\t\tx: ((CONFIG.WIDTH / 4) * 3) / SCALAR,\n\t\t\t\ty: (CONFIG.PADDING + 20) / SCALAR,\n\t\t\t\tfont: `${40 / SCALAR}px Arial`\n\t\t\t})\n\t\t\tif (winningRef.current === winningStates.lost)\n\t\t\t{\n\t\t\t\tNumbers({drawingContext: drawingContext,\n\t\t\t\tnum: 'YOU LOST',\n\t\t\t\tx: (CONFIG.WIDTH / 2) / SCALAR,\n\t\t\t\ty: (CONFIG.HEIGHT / 2) / SCALAR,\n\t\t\t\tfont: `${80 / SCALAR} 'Press Start 2P', cursive`})\n\t\t\t\tsetTimeout(() => clear(SCALAR, CONFIG, drawingContext), 4000);\n\t\t\t}\n\t\t\telse if (winningRef.current === winningStates.won)\n\t\t\t{\n\t\t\t\tNumbers({drawingContext: drawingContext,\n\t\t\t\t\tnum: 'YOU WON',\n\t\t\t\t\tx: (CONFIG.WIDTH / 2) / SCALAR,\n\t\t\t\t\ty: (CONFIG.HEIGHT / 2) / SCALAR,\n\t\t\t\t\tfont: `${80 / SCALAR} 'Press Start 2P', cursive`})\n\t\t\t\t\n\t\t\t\tsetTimeout(() => clear(SCALAR, CONFIG, drawingContext), 4000);\n\t\t\t}\n\t\t}\n\t}, [drawingContext, CONFIG, SCALAR, backgroundImg, gameStateRef, goalsPlayerTwo, goalsPlayerOne, winningRef])\n\t\n\t// <Means for animation>\n\tconst LoopCallback = useCallback(() => {\n\t\tdraw();\n\t\trequestAnimationFrame(LoopCallback);\n\t}, [draw])\n\t\n\tuseAnimation(LoopCallback, drawingContext, CONFIG);\n\n\treturn <canvas ref={CanvasRef} id='gameScreen'></canvas>\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}