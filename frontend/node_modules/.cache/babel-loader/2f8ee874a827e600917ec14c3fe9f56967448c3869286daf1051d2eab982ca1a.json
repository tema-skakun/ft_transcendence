{"ast":null,"code":"var _jsxFileName = \"/Users/linu/Projects/BORIS/frontend/src/App.tsx\",\n  _s = $RefreshSig$();\nimport './App.css';\nimport Navbar from './components/Navbar/Navbar';\nimport Content from './components/Content/Content';\nimport JSCookies from 'js-cookie';\nimport { useEffect, useRef, useState } from 'react';\nimport { LoginPage } from './components/LoginPage/LoginPage';\nimport { io } from 'socket.io-client';\nimport { InvitePopUp } from './components/Content/Game/components/InvitePopUp';\nimport { RejectionPopup } from './components/Content/Game/components/RejectionPopup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport let socket = null;\nfunction App(props) {\n  _s();\n  const [isLoading, setIsLoading] = useState(true);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [is2f, setis2f] = useState(false);\n  const userdata = useRef();\n  useEffect(() => {\n    const myCookie = JSCookies.get('accessToken');\n    if (!isLoggedIn && myCookie) {\n      const url = `http://${process.env.REACT_APP_IP_BACKEND}:6969/authentication/log-in`;\n      const headers = {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${JSCookies.get('accessToken')}`\n      };\n      fetch(url, {\n        method: 'GET',\n        headers: headers\n      }).then(response => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          setis2f(true);\n          throw new Error('Failed to authenticate2f');\n        }\n      }).then(data => {\n        userdata.current = data;\n        setIsLoggedIn(true);\n        if (!socket) {\n          socket = io(`http://${process.env.REACT_APP_IP_BACKEND}:6969/game`, {\n            withCredentials: true,\n            path: '/gameListener'\n          });\n        }\n      }).catch(error => {\n        console.error(error);\n      }).finally(() => {\n        setIsLoading(false);\n      });\n    } else {\n      setIsLoading(false);\n    }\n  }, [isLoggedIn]);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 16\n    }, this);\n  }\n  return isLoggedIn ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(InvitePopUp, {\n      socket: socket\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(RejectionPopup, {\n      socket: socket\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Content, {\n      state: props.state,\n      dispatch: props.dispatch,\n      setIsLoggedIn: setIsLoggedIn,\n      userdata: userdata.current\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(LoginPage, {\n      setis2f: setis2f,\n      is2f: is2f,\n      setIsLoggedIn: setIsLoggedIn,\n      userdata: userdata.current\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 13\n  }, this);\n}\n_s(App, \"SekRqA/ufqsBxZv/Ll0imgJQLsQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Navbar","Content","JSCookies","useEffect","useRef","useState","LoginPage","io","InvitePopUp","RejectionPopup","jsxDEV","_jsxDEV","socket","App","props","_s","isLoading","setIsLoading","isLoggedIn","setIsLoggedIn","is2f","setis2f","userdata","myCookie","get","url","process","env","REACT_APP_IP_BACKEND","headers","fetch","method","then","response","ok","json","Error","data","current","withCredentials","path","catch","error","console","finally","children","fileName","_jsxFileName","lineNumber","columnNumber","className","state","dispatch","_c","$RefreshReg$"],"sources":["/Users/linu/Projects/BORIS/frontend/src/App.tsx"],"sourcesContent":["import './App.css';\nimport Navbar from './components/Navbar/Navbar';\nimport Content from './components/Content/Content';\nimport JSCookies from 'js-cookie';\nimport {useEffect, useRef, useState} from 'react';\nimport {userProps} from './props';\nimport {LoginPage} from './components/LoginPage/LoginPage';\nimport { Socket } from 'socket.io-client';\nimport { io } from 'socket.io-client';\nimport { InvitePopUp } from './components/Content/Game/components/InvitePopUp';\nimport { RejectionPopup } from './components/Content/Game/components/RejectionPopup';\n\nexport let socket: Socket<any, any> | null = null;\n\n\nfunction App(props: any) {\n\tconst [isLoading, setIsLoading] = useState<boolean>(true);\n    const [isLoggedIn, setIsLoggedIn] = useState<boolean>(false);\n    const [is2f, setis2f] = useState<boolean>(false);\n    const userdata = useRef<userProps>();\n\n    useEffect(() => {\n        const myCookie = JSCookies.get('accessToken');\n\n        if (!isLoggedIn && myCookie) {\n            const url = `http://${process.env.REACT_APP_IP_BACKEND}:6969/authentication/log-in`;\n            const headers = {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${JSCookies.get('accessToken')}`,\n            };\n            fetch(url, {\n                method: 'GET',\n                headers: headers,\n            })\n                .then(response => {\n                    if (response.ok) {\n                        return response.json();\n                    } else {\n                        setis2f(true);\n                        throw new Error('Failed to authenticate2f');\n                    }\n                })\n                .then(data => {\n                    userdata.current = data;\n                    setIsLoggedIn(true);\n\n\t\t\t\t\tif (!socket)\n\t\t\t\t\t{\n\t\t\t\t\t\tsocket = io(`http://${process.env.REACT_APP_IP_BACKEND}:6969/game`, {\n\t\t\t\t\t\t\twithCredentials: true,\n\t\t\t\t\t\t\tpath: '/gameListener'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n                })\n                .catch(error => {\n                    console.error(error);\n                })\n                .finally(() => {\n                    setIsLoading(false);\n                });\n        } else {\n            setIsLoading(false);\n        }\n    }, [isLoggedIn]);\n\n    if (isLoading) {\n        return <div>Loading...</div>;\n    }\n\n    return (\n        isLoggedIn ? (\n            <div className=\"App\">\n\t\t\t\t<InvitePopUp socket={socket}/>\n\t\t\t\t<RejectionPopup socket={socket}/>\n                <Navbar/>\n                <Content state={props.state} dispatch={props.dispatch} setIsLoggedIn={setIsLoggedIn}\n                         userdata={userdata.current}/>\n            </div>\n        ) : (\n            <div className=\"App\">\n                <LoginPage setis2f={setis2f} is2f={is2f} setIsLoggedIn={setIsLoggedIn} userdata={userdata.current}/>\n            </div>\n        )\n    );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAO,WAAW;AAClB,OAAOA,MAAM,MAAM,4BAA4B;AAC/C,OAAOC,OAAO,MAAM,8BAA8B;AAClD,OAAOC,SAAS,MAAM,WAAW;AACjC,SAAQC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAO,OAAO;AAEjD,SAAQC,SAAS,QAAO,kCAAkC;AAE1D,SAASC,EAAE,QAAQ,kBAAkB;AACrC,SAASC,WAAW,QAAQ,kDAAkD;AAC9E,SAASC,cAAc,QAAQ,qDAAqD;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErF,OAAO,IAAIC,MAA+B,GAAG,IAAI;AAGjD,SAASC,GAAGA,CAACC,KAAU,EAAE;EAAAC,EAAA;EACxB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAU,IAAI,CAAC;EACtD,MAAM,CAACa,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAU,KAAK,CAAC;EAC5D,MAAM,CAACe,IAAI,EAAEC,OAAO,CAAC,GAAGhB,QAAQ,CAAU,KAAK,CAAC;EAChD,MAAMiB,QAAQ,GAAGlB,MAAM,EAAa;EAEpCD,SAAS,CAAC,MAAM;IACZ,MAAMoB,QAAQ,GAAGrB,SAAS,CAACsB,GAAG,CAAC,aAAa,CAAC;IAE7C,IAAI,CAACN,UAAU,IAAIK,QAAQ,EAAE;MACzB,MAAME,GAAG,GAAI,UAASC,OAAO,CAACC,GAAG,CAACC,oBAAqB,6BAA4B;MACnF,MAAMC,OAAO,GAAG;QACZ,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAG,UAAS3B,SAAS,CAACsB,GAAG,CAAC,aAAa,CAAE;MAC5D,CAAC;MACDM,KAAK,CAACL,GAAG,EAAE;QACPM,MAAM,EAAE,KAAK;QACbF,OAAO,EAAEA;MACb,CAAC,CAAC,CACGG,IAAI,CAACC,QAAQ,IAAI;QACd,IAAIA,QAAQ,CAACC,EAAE,EAAE;UACb,OAAOD,QAAQ,CAACE,IAAI,EAAE;QAC1B,CAAC,MAAM;UACHd,OAAO,CAAC,IAAI,CAAC;UACb,MAAM,IAAIe,KAAK,CAAC,0BAA0B,CAAC;QAC/C;MACJ,CAAC,CAAC,CACDJ,IAAI,CAACK,IAAI,IAAI;QACVf,QAAQ,CAACgB,OAAO,GAAGD,IAAI;QACvBlB,aAAa,CAAC,IAAI,CAAC;QAElC,IAAI,CAACP,MAAM,EACX;UACCA,MAAM,GAAGL,EAAE,CAAE,UAASmB,OAAO,CAACC,GAAG,CAACC,oBAAqB,YAAW,EAAE;YACnEW,eAAe,EAAE,IAAI;YACrBC,IAAI,EAAE;UACP,CAAC,CAAC;QACH;MACW,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;QACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACxB,CAAC,CAAC,CACDE,OAAO,CAAC,MAAM;QACX3B,YAAY,CAAC,KAAK,CAAC;MACvB,CAAC,CAAC;IACV,CAAC,MAAM;MACHA,YAAY,CAAC,KAAK,CAAC;IACvB;EACJ,CAAC,EAAE,CAACC,UAAU,CAAC,CAAC;EAEhB,IAAIF,SAAS,EAAE;IACX,oBAAOL,OAAA;MAAAkC,QAAA,EAAK;IAAU;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAM;EAChC;EAEA,OACI/B,UAAU,gBACNP,OAAA;IAAKuC,SAAS,EAAC,KAAK;IAAAL,QAAA,gBAC5BlC,OAAA,CAACH,WAAW;MAACI,MAAM,EAAEA;IAAO;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAE,eAC9BtC,OAAA,CAACF,cAAc;MAACG,MAAM,EAAEA;IAAO;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAE,eACrBtC,OAAA,CAACX,MAAM;MAAA8C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAE,eACTtC,OAAA,CAACV,OAAO;MAACkD,KAAK,EAAErC,KAAK,CAACqC,KAAM;MAACC,QAAQ,EAAEtC,KAAK,CAACsC,QAAS;MAACjC,aAAa,EAAEA,aAAc;MAC3EG,QAAQ,EAAEA,QAAQ,CAACgB;IAAQ;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAE;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACpC,gBAENtC,OAAA;IAAKuC,SAAS,EAAC,KAAK;IAAAL,QAAA,eAChBlC,OAAA,CAACL,SAAS;MAACe,OAAO,EAAEA,OAAQ;MAACD,IAAI,EAAEA,IAAK;MAACD,aAAa,EAAEA,aAAc;MAACG,QAAQ,EAAEA,QAAQ,CAACgB;IAAQ;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAE;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAE3G;AAET;AAAClC,EAAA,CArEQF,GAAG;AAAAwC,EAAA,GAAHxC,GAAG;AAuEZ,eAAeA,GAAG;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}