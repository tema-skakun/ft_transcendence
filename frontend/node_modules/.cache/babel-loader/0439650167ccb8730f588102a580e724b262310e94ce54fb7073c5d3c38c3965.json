{"ast":null,"code":"var _jsxFileName = \"/Users/linu/Projects/BORIS/frontend/src/components/Content/Chat/Chat.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport './Chat.css';\nimport Conversation from './conversations/conversation';\nimport Message from './Message/Message';\nimport Participants from './participants/participants';\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport JSCookies from 'js-cookie';\nimport CreateChannelButton from './createConversationButton/createConversationButton';\nimport JoinChannelButton from './joinChannelButton/joinChannelButton';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CREATE_KEY = 'create';\nconst JOIN_KEY = 'join';\nconst Chat = props => {\n  _s();\n  const [channels, setChannels] = useState([]);\n  const [currentChannel, setCurrentChannel] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const scrollRef = useRef();\n  const socket = useRef();\n  const [arrivalMessage, setArrivalMessage] = useState(null);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [activeKey, setActiveKey] = useState(CREATE_KEY);\n  useEffect(() => {\n    socket.current = io(`ws://${process.env.REACT_APP_IP_BACKEND}:6969/chat`, {\n      query: {\n        accessToken: JSCookies.get('accessToken')\n      }\n    });\n    socket.current.on('getMessage', data => {\n      setArrivalMessage(data);\n    });\n    return () => {\n      socket.current.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    arrivalMessage && currentChannel && currentChannel.id === arrivalMessage.channel.id && setMessages(prev => [...prev, arrivalMessage]);\n  }, [arrivalMessage, currentChannel]);\n  useEffect(() => {\n    const getChannels = async channelId => {\n      try {\n        const res = await axios.get(`http://${process.env.REACT_APP_IP_BACKEND}:6969/chat/` + props.userdata.intra_id, {\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${JSCookies.get('accessToken')}`\n          }\n        });\n        setChannels(res.data);\n        if (channelId) {\n          const chann = await res.data.find(channel => channel.id === channelId);\n          setCurrentChannel(chann);\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getChannels(0);\n    socket.current.on('updateChannels', async channelId => {\n      getChannels(channelId);\n    });\n  }, [props.userdata.intra_id]);\n  useEffect(() => {\n    if (currentChannel) {\n      const getMessages = async () => {\n        try {\n          const res = await axios.get(`http://${process.env.REACT_APP_IP_BACKEND}:6969/messages/` + (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.id), {\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${JSCookies.get('accessToken')}`\n            }\n          });\n          setMessages(res.data);\n        } catch (err) {\n          console.log(err);\n        }\n      };\n      getMessages();\n    }\n  }, [currentChannel]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const message = {\n      senderId: props.userdata.intra_id,\n      text: newMessage,\n      channelId: currentChannel.id\n    };\n    try {\n      const res = await axios.post(`http://${process.env.REACT_APP_IP_BACKEND}:6969/messages/create`, message, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${JSCookies.get('accessToken')}`\n        }\n      });\n      setMessages([...messages, res.data]);\n      socket.current.emit('sendMessage', res.data);\n      setNewMessage('');\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  useEffect(() => {\n    var _scrollRef$current;\n    (_scrollRef$current = scrollRef.current) === null || _scrollRef$current === void 0 ? void 0 : _scrollRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n  function closeModal() {\n    setModalOpen(false);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatMenu\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatMenuWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chatMenuButtons\",\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => {\n              setActiveKey(CREATE_KEY);\n              setModalOpen(true);\n            },\n            className: \"rounded-0\",\n            style: {\n              flex: 1\n            },\n            children: \"Create\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => {\n              setActiveKey(JOIN_KEY);\n              setModalOpen(true);\n            },\n            className: \"rounded-0\",\n            style: {\n              flex: 1,\n              marginLeft: '3px'\n            },\n            children: \"Join\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 6\n        }, this), channels.map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => setCurrentChannel(c),\n          children: /*#__PURE__*/_jsxDEV(Conversation, {\n            currentChannel: currentChannel,\n            channel: c,\n            currentUser: props.userdata\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 8\n          }, this)\n        }, c.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatBox\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatBoxWrapper\",\n        children: currentChannel ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chatBoxTop\",\n            children: messages.map(m => /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: scrollRef,\n              children: /*#__PURE__*/_jsxDEV(Message, {\n                message: m,\n                own: m.sender.intra_id === props.userdata.intra_id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 11\n              }, this)\n            }, m.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 10\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chatBoxBottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"chatMessageInput\",\n              placeholder: \"write something...\",\n              onChange: e => setNewMessage(e.target.value),\n              value: newMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"chatSubmitButton\",\n              onClick: handleSubmit,\n              children: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"noConversationText\",\n          children: \"Open a conversation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatParticipants\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatParticipantsWrapper\",\n        children: /*#__PURE__*/_jsxDEV(Participants, {\n          channel: currentChannel,\n          currentUser: props.userdata\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: modalOpen,\n      onHide: closeModal,\n      backdrop: \"static\",\n      keyboard: false,\n      children: activeKey === CREATE_KEY ? /*#__PURE__*/_jsxDEV(CreateChannelButton, {\n        socket: socket.current,\n        closeModal: closeModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 6\n      }, this) : /*#__PURE__*/_jsxDEV(JoinChannelButton, {\n        socket: socket.current,\n        closeModal: closeModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 9\n  }, this);\n};\n_s(Chat, \"IxK25G61y9ZdSH7vGimat05tDLc=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["useEffect","useRef","useState","Conversation","Message","Participants","axios","io","JSCookies","CreateChannelButton","JoinChannelButton","Modal","Button","jsxDEV","_jsxDEV","Fragment","_Fragment","CREATE_KEY","JOIN_KEY","Chat","props","_s","channels","setChannels","currentChannel","setCurrentChannel","messages","setMessages","newMessage","setNewMessage","scrollRef","socket","arrivalMessage","setArrivalMessage","modalOpen","setModalOpen","activeKey","setActiveKey","current","process","env","REACT_APP_IP_BACKEND","query","accessToken","get","on","data","disconnect","id","channel","prev","getChannels","channelId","res","userdata","intra_id","headers","chann","find","err","console","log","getMessages","handleSubmit","e","preventDefault","message","senderId","text","post","emit","_scrollRef$current","scrollIntoView","behavior","closeModal","className","children","style","display","justifyContent","onClick","flex","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","map","c","currentUser","m","ref","own","sender","placeholder","onChange","target","value","show","onHide","backdrop","keyboard","_c","$RefreshReg$"],"sources":["/Users/linu/Projects/BORIS/frontend/src/components/Content/Chat/Chat.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport './Chat.css'\nimport Conversation from './conversations/conversation';\nimport Message from './Message/Message';\nimport Participants from './participants/participants';\nimport axios from 'axios';\nimport { io } from 'socket.io-client'\nimport JSCookies from 'js-cookie';\nimport CreateChannelButton from './createConversationButton/createConversationButton';\nimport JoinChannelButton from './joinChannelButton/joinChannelButton';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst CREATE_KEY = 'create'\nconst JOIN_KEY = 'join'\n\nconst Chat = (props: any) => {\n\tconst [channels, setChannels] = useState<any>([]);\n\tconst [currentChannel, setCurrentChannel] = useState<any>(null);\n\tconst [messages, setMessages] = useState<any>([]);\n\tconst [newMessage, setNewMessage] = useState('');\n\tconst scrollRef = useRef<any>();\n\tconst socket = useRef<any>();\n\tconst [arrivalMessage, setArrivalMessage] = useState<any>(null);\n\tconst [modalOpen, setModalOpen] = useState(false)\n\tconst [activeKey, setActiveKey] = useState(CREATE_KEY)\n\n\n\tuseEffect(() => {\n\t\tsocket.current = io(`ws://${process.env.REACT_APP_IP_BACKEND}:6969/chat`, {\n\t\t\tquery: { accessToken:  JSCookies.get('accessToken')},\n\t\t  });\n\t\tsocket.current.on('getMessage', (data: any) => {\n\t\t\tsetArrivalMessage(data);\n\t\t});\n\t\treturn (() => {\n\t\t\t\tsocket.current.disconnect();\n\t\t})\n\t}, []);\n\n\tuseEffect(() => {\n\t\tarrivalMessage && currentChannel && currentChannel.id === arrivalMessage.channel.id &&\n\t\tsetMessages((prev: any)=> [...prev, arrivalMessage]);\n\t}, [arrivalMessage, currentChannel])\n\n\n\tuseEffect(() =>{\n\t\tconst getChannels = async (channelId: number)=>{\n\t\t\ttry {\n\t\t\t\tconst res = await axios.get(`http://${process.env.REACT_APP_IP_BACKEND}:6969/chat/`+props.userdata.intra_id, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'Authorization': `Bearer ${JSCookies.get('accessToken')}`,\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tsetChannels(res.data);\n\t\t\t\tif (channelId) {\n\t\t\t\t\tconst chann = await res.data.find((channel: any) => channel.id === channelId);\n\t\t\t\t\tsetCurrentChannel(chann);\n\t\t\t\t}\n\t\t\t} catch(err) {\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t}\n\t\tgetChannels(0);\n\t\tsocket.current.on('updateChannels', async (channelId: any) => {\n\t\t\tgetChannels(channelId);\n\t\t})\n\t}, [props.userdata.intra_id])\n\n\tuseEffect(() =>{\n\t\tif (currentChannel) {\n\t\t\tconst getMessages =async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await axios.get(`http://${process.env.REACT_APP_IP_BACKEND}:6969/messages/`+currentChannel?.id, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t'Authorization': `Bearer ${JSCookies.get('accessToken')}`,\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tsetMessages(res.data);\n\t\t\t\t} catch(err) {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t}\n\t\t\t}\n\t\t\tgetMessages();\n\t\t}\n\t},[currentChannel]);\n\n\tconst handleSubmit = async (e: any) => {\n\t\te.preventDefault();\n\t\tconst message = {\n\t\t\tsenderId: props.userdata.intra_id,\n\t\t\ttext: newMessage,\n\t\t\tchannelId: currentChannel.id,\n\t\t};\n\n\t\ttry {\n\t\t\tconst res = await axios.post(`http://${process.env.REACT_APP_IP_BACKEND}:6969/messages/create`, message, {\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Authorization': `Bearer ${JSCookies.get('accessToken')}`,\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetMessages([...messages, res.data])\n\t\t\tsocket.current.emit('sendMessage', res.data);\n\t\t\tsetNewMessage('');\n\t\t}catch(err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\tuseEffect(()=>{\n\t\tscrollRef.current?.scrollIntoView({behavior: \"smooth\" });\n\t},[messages])\n\n\tfunction closeModal() {\n\t\tsetModalOpen(false)\n\t}\n\n    return (\n        <div className=\"chat\">\n            <div className='chatMenu'>\n\t\t\t\t<div className=\"chatMenuWrapper\">\n\t\t\t\t\t<div className='chatMenuButtons' style={{ display: 'flex', justifyContent: 'space-between' }} >\n\t\t\t\t\t\t<Button onClick={() => {setActiveKey(CREATE_KEY); setModalOpen(true) } } className=\"rounded-0\" style={{ flex: 1 }}>\n\t\t\t\t\t\t\tCreate\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={() => {setActiveKey(JOIN_KEY); setModalOpen(true) } } className=\"rounded-0\" style={{ flex: 1, marginLeft: '3px' }}>\n\t\t\t\t\t\t\tJoin\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t{channels.map((c: any) => (\n\t\t\t\t\t\t<div key={c.id} onClick={() => setCurrentChannel(c)}>\n\t\t\t\t\t\t\t<Conversation currentChannel={currentChannel} channel={c} currentUser={props.userdata}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className='chatBox'>\n\t\t\t\t<div className=\"chatBoxWrapper\">\n\t\t\t\t\t{currentChannel ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className=\"chatBoxTop\">\n\t\t\t\t\t\t\t\t{messages.map((m: any)=>(\n\t\t\t\t\t\t\t\t\t<div key={m.id} ref={scrollRef}>\n\t\t\t\t\t\t\t\t\t\t<Message message={m} own={m.sender.intra_id === props.userdata.intra_id} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"chatBoxBottom\">\n\t\t\t\t\t\t\t\t<textarea className=\"chatMessageInput\" \n\t\t\t\t\t\t\t\t\tplaceholder='write something...'\n\t\t\t\t\t\t\t\t\tonChange={(e) => setNewMessage(e.target.value)}\n\t\t\t\t\t\t\t\t\tvalue={newMessage}\n\t\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t\t<button className='chatSubmitButton' onClick={handleSubmit}>Send</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</> \n\t\t\t\t\t) : (\n\t\t\t\t\t\t<span className='noConversationText'>Open a conversation</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"chatParticipants\">\n\t\t\t\t<div className=\"chatParticipantsWrapper\">\n\t\t\t\t\t<Participants channel={currentChannel} currentUser={props.userdata}/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Modal show={modalOpen} onHide={closeModal} backdrop=\"static\" keyboard={false}>\n\t\t\t\t{activeKey === CREATE_KEY ?\n\t\t\t\t\t<CreateChannelButton socket={socket.current} closeModal={closeModal} /> :\n\t\t\t\t\t<JoinChannelButton socket={socket.current} closeModal={closeModal} />\n\t\t\t\t}\n      \t\t</Modal>\n        </div>\n    )\n}\n\nexport default Chat;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}